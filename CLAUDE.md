# 洞窟探検ゲーム - 機能実装管理

このドキュメントは、洞窟探検ゲームの実装状況と今後の開発予定を管理するためのものです。

## 実装済み機能 ✅

### v1.0 - 基本機能
- [x] 左右キーでプレイヤー操作
- [x] 洞窟の壁を避けるゲームプレイ
- [x] スコア表示（距離）
- [x] スクロール速度の段階的上昇
- [x] スペースキーで移動速度半減（精密操作）
- [x] 当たり判定の調整

### v1.1 - ハイスコア・ビジュアル強化
- [x] **ハイスコア保存機能** (LocalStorage)
- [x] **新記録表示** (🏆マーク)
- [x] **深度による背景色変化** (0-100m, 100-200m, 200-300m...)
- [x] **パーティクルエフェクト** (プレイヤーの移動軌跡)
- [x] **動的な照明システム** (深度に応じた光源範囲変化)
- [x] **壁の質感向上** (岩のグラデーション、発光エフェクト)
- [x] **プレイヤーの光のオーラ** (発光エフェクト強化)

### v1.2 - アイテム・パワーアップシステム
- [x] **コイン/宝石収集**
  - 洞窟内にランダムに出現
  - 収集でボーナススコア加算（+50点/個）
  - 回転アニメーション効果
  - 収集数の表示
- [x] **シールドアイテム**
  - 1回だけ壁衝突を無効化
  - 視覚的なシールドエフェクト
  - アクティブ時の画面表示
- [x] **スピードダウンアイテム**
  - 一時的にスクロール速度を50%に低下
  - 効果時間: 5秒
  - 残り時間の表示
- [x] **スコア倍率アイテム**
  - 一定時間スコアが2倍
  - 効果時間: 10秒
  - 画面上に倍率と残り時間を表示

### v1.3 - キーボード操作性向上
- [x] **Enterキーでゲーム開始/リトライ**
  - スタート画面でEnterキー押下でゲーム開始
  - ゲームオーバー画面でEnterキー押下でリトライ
  - マウス操作不要でシームレスなプレイ体験を実現

---

## 今後の実装予定 📋

### 優先度: 高 🔥

#### 1. サウンド機能
- [ ] **BGM追加**
  - 緊張感のある洞窟探検BGM
  - 深度による音楽変化
- [ ] **効果音**
  - アイテム取得音
  - 壁衝突音
  - スピードアップ時の音
  - メニュー操作音

#### 2. ゲームモード拡張
- [ ] **難易度選択**
  - イージー（壁の隙間が広い）
  - ノーマル（現在の設定）
  - ハード（壁の隙間が狭い、スピードアップが速い）
- [ ] **タイムアタックモード**
  - 制限時間内に最大距離を目指す
  - タイマー表示

### 優先度: 中 ⭐

#### 3. 障害物バリエーション
- [ ] **落石**
  - 上から落ちてくる障害物
  - ランダムな速度と位置
- [ ] **コウモリ（敵キャラクター）**
  - 横方向に動く敵
  - 接触でゲームオーバー
- [ ] **狭い通路**
  - 特定区間で難易度急上昇
  - 予告表示
- [ ] **動く壁**
  - 左右に動く壁の追加
  - パターン化された動き

#### 4. UI/UX向上
- [ ] **一時停止機能**
  - ESCキーでポーズメニュー
  - ポーズ画面のデザイン
- [ ] **設定メニュー**
  - BGM/効果音のオン/オフ
  - 音量調整
  - 難易度設定
- [ ] **チュートリアル**
  - 初回プレイ時の操作説明
  - アイテムの説明
- [ ] **モバイル対応**
  - タッチ操作対応
  - レスポンシブデザイン

#### 5. スコア・実績システム
- [ ] **距離マイルストーン**
  - 100m、500m、1000m達成時の演出
  - 特別なエフェクト
- [ ] **実績システム**
  - 特定条件達成でバッジ獲得
  - 実績一覧画面
  - 例: 「初めての100m」「アイテム100個収集」など
- [ ] **リプレイ機能**
  - ベストランの記録再生
  - データの保存と読み込み

### 優先度: 低 💡

#### 6. ストーリー要素
- [ ] **ステージ制**
  - 複数の洞窟ステージ
  - ステージ選択画面
- [ ] **ボス戦**
  - 一定距離ごとに巨大な障害物
  - 特殊な攻略方法
- [ ] **エンディング**
  - 特定距離到達でストーリークリア
  - エンディング演出

#### 7. ビジュアル追加強化
- [ ] **背景アニメーション**
  - 壁の質感変化
  - 結晶の輝き
- [ ] **衝突エフェクト**
  - 壁衝突時の火花
  - カメラシェイク
- [ ] **深度による光の変化**
  - 深くなるほど暗くなる演出の強化
  - フレアエフェクト

---

## バグ修正・改善 🐛

### 既知の問題
- 現在、既知のバグはありません

### 改善提案
- パフォーマンス最適化（パーティクルの数を制限）
- より滑らかなアニメーション

---

## 変更履歴

### v1.3 (2025-10-04)
- キーボード操作性の向上
- Enterキーでゲーム開始/リトライ機能を追加
- マウス操作不要でゲームプレイが可能に

### v1.2 (2025-10-03)
- アイテムシステムを実装
- 4種類のアイテム追加（コイン、シールド、スピードダウン、スコア倍率）
- アイテム効果の画面表示機能
- コイン収集カウンター追加
- アイテムの回転アニメーション

### v1.1 (2025-10-02)
- ハイスコア保存機能を追加
- ビジュアル強化（パーティクル、深度表現、照明システム）
- 壁の質感とエフェクトを改善
- 新記録表示機能を追加

### v1.0 (初回リリース)
- 基本的なゲームプレイ実装
- スコアシステム
- スクロール速度の変化
- 精密操作機能（スペースキー）

---

## 開発ノート

### 技術スタック
- HTML5 Canvas
- Vanilla JavaScript
- CSS3

### 設計方針
- シンプルで直感的な操作性
- 段階的な難易度上昇
- 視覚的なフィードバックの充実
- パフォーマンスを重視した実装

### 次回の開発セッションで検討すること
1. アイテムシステムの実装優先度
2. サウンド素材の選定
3. モバイル対応の必要性
4. 難易度バランスの調整
